{{ extends 'global/Page.html' }}
{{ block title }}Instructions{{ endblock }}

{{ block content }}

<p>
    You will play 20 rounds of the same game. The basic payment is 3&pound;. On top of your basic payment,     you can accumulate a bonus payment over the course of the rounds. Your decisions and those of the other,     anonymous participants in the experiment will determine the sum of your money (a detailed explanation is     provided below).
</p>
<p>
    You will play the game in groups of 5 players. The 4 players that join your group will stay the same over     all rounds that you play.
</p>
<p>
    In each round, you will choose one of 4 buttons, labeled A, B, C, and D. You can earn <b>0.25&pound;</b> additional bonus if <b>no other player</b> chooses the button you chose. However, you <b>do not earn</b> any bonus if <b>one or more other participants</b> in your group also chooses the button you chose in that round.
</p>
<p>
    Every player will be given a unique player number, which stays the same over all rounds. As you complete     rounds, you will see the choice history of the last 8 rounds and accumulated earnings of all players.
</p>
<p>
    For each choice, you have 60 seconds, which you can extend a maximum of twice by 30 seconds. The total       possible time per choice is 120 seconds. If you do not make a choice in that time, the computer will make     a random choice for you and you will not receive any bonus payment for that round.
</p>
<p>
    To help you understand how the game works, here is an example from Round 3:
</p>
<img src="https://github.com/ChrisSantosLang/MADChairs/blob/main/Media/Screenshot.png?raw=true">
<br><br>
<ul>
  <li>On this page, you will see multiple buttons representing different choices (e.g., A, B, C, D).</li>
  <li>When you click on a button, a new "confirm" button will appear.</li>
  <li>You can change your choice before confirming your choice.</li>
  <li>You must confirm your choice to earn any bonus.</li>
</ul>
<p>
    You can see a section called <b>Previous rounds</b>. This shows the choices made by all participants in       your group in the previous rounds, in order by player number. Some of them are in parentheses, which means they were selected by more than one person in that round.
</p>
<p>
    In addition, an amount of money is shown next to each player. This reflects the accumulated bonus earned     by each player up to (but not including) the current round, which is round 3 now.
</p>
<p>
    <i>Note: The "Previous rounds" table always displays information for the last 8 completed rounds.</i>
</p>
<p>
    This information is provided to help you track patterns and performance within your group as the game         progresses.
</p>
<br>
<br>
<br>
<div id="Q1">
    <b>Based on the example you have just read, if the players click the following buttons, which players         would add 0.25&pound; to their bonus payment?</b>
    <br><br>
    <table>
        <tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td>Player 1:</td><td style='text-align: center;'>D</td></tr>
        <tr><td></td><td>Player 2:</td><td style='text-align: center;'>(B)</td></tr>
        <tr><td></td><td>Player 3:</td><td style='text-align: center;'>C</td></tr>
        <tr><td></td><td>Player 4:</td><td style='text-align: center;'>A</td></tr>
        <tr><td></td><td>Player 5:</td><td style='text-align: center;'>(B)</td></tr>
    </table>
    <br><br>
    <b><i>Please re-read the study instructions above if you are not sure. You will have two opportunities to     get this question correct.</i></b>
    <br><br>
    <table>
        <tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
            <td><button id="1A" class="btn btn-primary" style="width: 100%;">
            Players 2 and 5
        </button></td></tr>
        <tr><td></td><td><button id="1B" class="btn btn-primary" style="width: 100%;">
            Players 2, 3 and 4
        </button></td></tr>
        <tr><td></td><td><button id="1C" class="btn btn-primary" style="width: 100%;">
            Players 1, 2, 4 and 5
        </button></td></tr>
        <tr><td></td><td><button id="1D" class="btn btn-primary" style="width: 100%;">
            Players 1, 3 and 4
        </button></td></tr>
        <tr><td></td><td><button id="1E" class="btn btn-primary" style="width: 100%;">
            None of the above
        </button></td></tr>
    </table>  
    <div id="Q1check" style="display: none"><br>&nbsp;&nbsp;&nbsp;&nbsp;
        You clicked "<b><span id="Q1selection"></span></b>". &nbsp;&nbsp;&nbsp;
        <button id="Q1confirm" class="btn btn-primary">Confirm</button> &nbsp;&nbsp;&nbsp;
        <button id="Q1cancel" class="btn btn-primary">Cancel</button>
    </div>
</div>


<div id="Q1Correct" style="display: none">
    <b>Your answer to the first question was correct!</b><br>    
    <br>  
    <br>
    <b>Final question: Based on the example you have just read, what would the accumulated bonuses of the 
        players be in the following example?</b><br>
    <br>
    <img src="https://github.com/ChrisSantosLang/MADChairs/blob/main/Media/Q2.png?raw=true">
    <br><br>
    <b><i>Please re-read the study instructions above if you are not sure. You will have two opportunities to     get this question correct.</i></b>
    <br><br><table>
        <tr><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td><button id="2A" class="btn btn-primary" style="width: 100%;">
            0.25&pound;, 0.25&pound;, 0.25&pound;, 0.50&pound;, and 0.25&pound;, respectively
        </button></td></tr>
        <tr><td></td><td><button id="2B" class="btn btn-primary" style="width: 100%;">
            0.25&pound;, 0.00&pound;, 0.25&pound;, 0.50&pound;, and 0.25&pound;, respectively
        </button></td></tr>
        <tr><td></td><td><button id="2C" class="btn btn-primary" style="width: 100%;">
            0.00&pound;, 0.25&pound;, 0.50&pound;, 0.00&pound;, and 0.25&pound;, respectively
        </button></td></tr>
        <tr><td></td><td><button id="2D" class="btn btn-primary" style="width: 100%;">
            0.50&pound;, 0.25&pound;, 0.00&pound;, 0.25&pound;, and 0.25&pound;, respectively
        </button></td></tr>
        <tr><td></td><td><button id="2E" class="btn btn-primary" style="width: 100%;">
            None of the above
        </button></td></tr>
    </table>  
    <div id="Q2check" style="display: none"><br>&nbsp;&nbsp;&nbsp;&nbsp;
        You clicked "<b><span id="Q2selection"></span></b>". &nbsp;&nbsp;&nbsp;
        <button id="Q2confirm" class="btn btn-primary">Confirm</button> &nbsp;&nbsp;&nbsp;
        <button id="Q2cancel" class="btn btn-primary">Cancel</button>
    </div>
</div>
<div id="wrong" style="display: none">
    <br>
    <b>The first option you confirmed was not correct. You have one more chance to choose the correct option. If you are not sure, please re-read the instruction.</b>
</div>
<div id="fail" style="display: none">
    <b>You have not answered the question correctly. Please close this browser tab and click "Stop Without Completing" in Prolific.</b>
</div>
<div id="Q2Correct" style="display: none">
    <b>You answered both comprehension questions correctly!</b><br>
    <br>
    <br>
    Click "Next" below to enter the waiting room. The game will begin when five players have joined.<br>
    <br>
    {{ next_button }}
</div>


{{ endblock }}

{{ block scripts }}
<script>
function Q1(event) {
    $('#Q1selection').text(event.target.innerText);
    $('#Q1check').show();
    window.scrollTo(0, document.body.scrollHeight);
    event.preventDefault();
}
function Q2(event) {
    $('#Q2selection').text(event.target.innerText);
    $('#Q2check').show();
    window.scrollTo(0, document.body.scrollHeight);
    event.preventDefault();
}
document.addEventListener("DOMContentLoaded", function (event) {
    $('#1A, #1B, #1C, #1D, #1E').on('click', Q1);
    $('#Q1confirm').on('click', function (event) {
        if ($('#Q1selection').text() == "Players 1, 3 and 4"){
        	$('#Q1').hide();
        	$('#wrong').hide();
    		$('#Q1Correct').show();
        } else {
            if ($('#wrong').is(":visible")){
                $('#Q1').hide();
                $('#wrong').hide();
                $('#fail').show();
            } else {
                $('#Q1check').hide();
                $('#wrong').show();
            }
        }
      	event.preventDefault();
    });
    $('#Q1cancel').on('click', function (event) {
        $('#Q1check').hide();
        event.preventDefault();
    }); 
    $('#2A, #2B, #2C, #2D, #2E').on('click', Q2);
 	$('#Q2confirm').on('click', function (event) {
        if ($('#Q2selection').text().slice(0, 4) == "0.00"){
        	$('#Q1Correct').hide();
        	$('#wrong').hide();
    		$('#Q2Correct').show();
        } else {
            if ($('#wrong').is(":visible")){
                $('#Q1Correct').hide();
                $('#wrong').hide();
                $('#fail').show();
            } else {
                $('#Q2check').hide();
                $('#wrong').show();
            }
        }
      	event.preventDefault();
    });
    $('#Q2cancel').on('click', function (event) {
        $('#Q2check').hide();
        event.preventDefault();
    });                  
});
</script>
{{ endblock }}
